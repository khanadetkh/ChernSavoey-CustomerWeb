<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.css">
    <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsen-css-components.min.css">
    <link href='https://fonts.googleapis.com/css?family=Kanit:400,300&subset=thai,latin' rel='stylesheet' type='text/css'>
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400,300,600" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/profile.css">

</head>

<body>
    <%- include ("layout.ejs") %>

        <p id="hid-noteToSender"></p>
        <p id="hid-location"></p>

        <ul>
            <li>
                <a>
                    <h2>Menu</h2>
                    <h2 style="color: rgb(68, 68, 75);">
                        <% getOrder.forEach((order) => { %>
                            Store : "
                            <%= order.store%>
                                <% }); %> "
                    </h2>
                    <table style="font-family: Kanit; color: dimgrey;">
                        <tr>
                            <td>
                                <div style="margin-left: 50px;">
                                    Order
                                </div>
                            </td>
                            <td>
                                <div style="margin-left: 70px;">
                                    Quantity
                                </div>

                            </td>
                            <td>
                                <div style="margin-left: 35px;">
                                    Price
                                </div>

                            </td>
                        </tr>

                    </table>


                    <% orderList.forEach((orderDetail)=> { %>

                        <h5 class="card-title" style="font-size: 17px; display: inline;">
                            <%= orderDetail.menuName %>
                        </h5>

                        <div class="menu" style="font-size:17px; text-align: center; display: inline;">
                            <h3 class="card-text" style="display: inline;">
                                <div style="margin-left: 25%; display: inline;">
                                    <%= orderDetail.qty %>
                                </div>
                                <div style="margin-left: 25%; display: inline;">
                                    <%= orderDetail.price %>
                                </div>

                            </h3>

                        </div>
                        <br>
                        <br>

                        <div style="text-align: center;">
                            <% getOrder.forEach((order) => { %>

                                Status :
                                <%= order.status%>

                                    <% }); %>
                        </div>



                        <!-- <button type="button" class="btn btn-success" onclick="testSweet()">Confirm Order</button> -->

                        </div>
                        </div>
                        </div>
                        <% }); %>
                            </div>
                            </div>
                </a>
            </li>
        </ul>

        <style>
            .cart-text {
                font-size: 20px;
            }
            
            h2,
            h3 {
                font-size: 100%;
                font-weight: normal;
                text-align: center;
                font-family: Kanit;
            }
            
            ul,
            li {
                list-style: none;
            }
            /* ul {
                overflow: hidden;
                padding: 3em;
            } */
            
            p {
                font-family: Kanit;
            }
            
            ul li a {
                text-decoration: none;
                background: rgb(233, 233, 166);
                display: block;
                height: 300px;
                width: 330px;
                padding: 1em;
                margin-left: 10%;
                margin-top: 5%;
                box-shadow: 5px 5px 7px rgba(33, 33, 33, .7);
                -moz-transition: -moz-transform .15s linear;
                -o-transition: -o-transform .15s linear;
                -webkit-transition: -webkit-transform .15s linear;
            }
            
            ul li {
                margin: 1em;
                float: left;
            }
            
            ul li h2 {
                font-size: 140%;
                font-weight: bold;
                padding-bottom: 10px;
            }
            
            ul li p {
                font-family: "Reenie Beanie", arial, sans-serif;
                font-size: 180%;
            }
            
            ul li a {
                -webkit-transform: rotate(-6deg);
                -o-transform: rotate(-6deg);
                -moz-transform: rotate(-6deg);
            }
            
            ul li:nth-child(even) a {
                -o-transform: rotate(4deg);
                -webkit-transform: rotate(4deg);
                -moz-transform: rotate(4deg);
                position: relative;
                top: 5px;
                background: #cfc;
            }
            
            ul li:nth-child(3n) a {
                -o-transform: rotate(-3deg);
                -webkit-transform: rotate(-3deg);
                -moz-transform: rotate(-3deg);
                position: relative;
                top: -5px;
                background: #ccf;
            }
            
            ul li:nth-child(5n) a {
                -o-transform: rotate(5deg);
                -webkit-transform: rotate(5deg);
                -moz-transform: rotate(5deg);
                position: relative;
                top: -10px;
            }
            
            ul li a:hover,
            ul li a:focus {
                box-shadow: 10px 10px 7px rgba(0, 0, 0, .7);
                -moz-box-shadow: 10px 10px 7px rgba(0, 0, 0, .7);
                -webkit-box-shadow: 10px 10px 7px rgba(0, 0, 0, .7);
                -webkit-transform: scale(1.25);
                -moz-transform: scale(1.25);
                -o-transform: scale(1.25);
                position: relative;
                z-index: 5;
            }
            
            ol {
                text-align: center;
            }
            
            ol li {
                display: inline;
                padding-right: 1em;
            }
            
            ol li a {
                color: #fff;
            }
        </style>







        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
        <script>
            function testSweet() {
                Swal.fire({
                    title: 'Are you sure?',
                    text: "You won't be able to revert this!",
                    icon: "warning",
                    reverseButtons: true,
                    showCancelButton: true,
                    confirmButtonText: 'Confirm',
                    confirmButtonColor: '#27AE60',
                    cancelButtonColor: '#C0392B',
                }).then((result) => {

                    console.log(result)

                    if (result.value) {
                        Swal.fire(
                            "",
                            'You are confirm this order',
                            'success'
                        ).then(() => {

                            //TODO: get sender id from user login
                            const senderId = "123";
                            const orderIdPath = window.location.pathname.split("/")
                            const orderId = orderIdPath[2]
                            console.log("Senddddd 1")

                            fetch(`/orderSender/order/update/${orderId}/${senderId}/accepted`)
                                .then((data) => {
                                    console.log("Senddddd 2")
                                    window.location.href = `/orderSender/${orderId}`;
                                })
                                .catch((err) => console.log('err ' + err))

                            /*  const steps = Swal.mixin({
                                    confirmButtonText: 'Next &rarr;',
                                    showCancelButton: false,
                                    progressSteps: ['1', '2', '3', '4', '5'],
                                    didOpen: (t) => {
                                        if (Swal.getQueueStep() == 4) {
                                            Swal.getConfirmButton().innerHTML = 'OK!'
                                        }
                                    },
                                }).queue([{
                                    text: 'You are arrived at the shop',
                                    imageUrl: 'https://firebasestorage.googleapis.com/v0/b/it60-42-choen-savoey.appspot.com/o/javascripts%2FBest%20of%20Behance.gif?alt=media&token=286a5562-2633-4ed4-8a0f-62032c60fce6',
                                    imageWidth: 350,
                                    imageHeight: 250,
                                }, {
                                    imageUrl: 'https://firebasestorage.googleapis.com/v0/b/it60-42-choen-savoey.appspot.com/o/javascripts%2FMetamorphosis.gif?alt=media&token=31fc8981-b433-4f45-ba70-a207f9e50cb5',
                                    imageWidth: 350,
                                    imageHeight: 250,
                                    text: 'You are placed the order',
                                }, {
                                    imageUrl: 'https://firebasestorage.googleapis.com/v0/b/it60-42-choen-savoey.appspot.com/o/javascripts%2Fbell.gif?alt=media&token=5735736c-97fc-4f4a-a4f3-f17d343741fb',
                                    imageWidth: 150,
                                    imageHeight: 150,
                                    text: 'You are collected the food'
                                }, {
                                    imageUrl: 'https://firebasestorage.googleapis.com/v0/b/it60-42-choen-savoey.appspot.com/o/javascripts%2Fscooter-running.gif?alt=media&token=0385ea48-a31a-494c-8f8e-b15a7a7f72c1',
                                    imageWidth: 250,
                                    imageHeight: 200,
                                    text: 'Waiting for shipment'
                                }, {
                                    text: 'Order has been delivered',
                                    imageUrl: 'https://firebasestorage.googleapis.com/v0/b/it60-42-choen-savoey.appspot.com/o/javascripts%2FOnline%20Surveys%20for%20Cash%20_%20Earn%20Money%20online.gif?alt=media&token=08866601-ce6d-4946-b270-288a3f8401f0',
    
                                }, ])
    
                                steps.then((result) => {
    
                                    if (result.value) {
                                        // const answers = JSON.stringify(result.value)
                                        Swal.fire({
                                            title: 'Process Sucessful',
                                            imageUrl: 'https://firebasestorage.googleapis.com/v0/b/it60-42-choen-savoey.appspot.com/o/javascripts%2Fcheck-circle.gif?alt=media&token=48c6c548-6816-4bf7-8f23-06c09d58f0e6',
                                            confirmButtonText: 'Thank you!'
                                        })
                                    }
                                })*/
                        })
                    } else {
                        Swal.fire('', 'You are deny this order', 'error')
                    }
                })

            }
        </script>
</body>

</html>