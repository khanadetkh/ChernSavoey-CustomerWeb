<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.css">
    <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsen-css-components.min.css">
    <link href='https://fonts.googleapis.com/css?family=Kanit:400,300&subset=thai,latin' rel='stylesheet' type='text/css'>

</head>

<body>
    <%- include ("layout.ejs") %>

        <p id="hid-noteToSender"></p>
        <p id="hid-location"></p>

        <ons-card class="order" style="margin-top: 110px;">
            <div class="storeName font">
                <div class="storeName font">
                    <ons-list-item>
                        <table>
                            <tr>
                                <div class="left">
                                    <img class="list-item__thumbnail" src="https://png.pngtree.com/png-clipart/20190705/original/pngtree-vector-shop-icon-png-image_4184051.jpg">
                                </div>
                            </tr>
                            <tr>
                                <th>
                                    Cafe Amazon
                                </th>
                            </tr>
                            <tr>
                                <td>โกโก้เย็น</td>
                                <td>50 บาท</td>
                            </tr>
                            <tr>
                                <td>กาแฟเย็น</td>
                                <td>60 บาท</td>
                            </tr>

                        </table>
                    </ons-list-item>
                    <tr>
                        <td>total</td>
                        <td>110 บาท</td>
                    </tr>
                </div>
            </div>
        </ons-card>
        <% getOrder.forEach((order) => { %>
            <ons-card style="margin-block: initial;">
                Status :
                <%= order.status%>
            </ons-card>
            <% }); %>


                <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
                <script>
                    function testSweet() {
                        Swal.fire({
                            title: 'Are you sure?',
                            text: "You won't be able to revert this!",
                            icon: "warning",
                            reverseButtons: true,
                            showCancelButton: true,
                            confirmButtonText: 'Confirm',
                            confirmButtonColor: '#27AE60',
                            cancelButtonColor: '#C0392B',
                        }).then((result) => {

                            console.log(result)

                            if (result.value) {
                                Swal.fire(
                                    "",
                                    'You are confirm this order',
                                    'success'
                                ).then(() => {

                                    //TODO: get sender id from user login
                                    const senderId = "123";
                                    const orderIdPath = window.location.pathname.split("/")
                                    const orderId = orderIdPath[2]
                                    console.log("Senddddd 1")

                                    fetch(`/orderSender/order/update/${orderId}/${senderId}/accepted`)
                                        .then((data) => {
                                            console.log("Senddddd 2")
                                            window.location.href = `/orderSender/${orderId}`;
                                        })
                                        .catch((err) => console.log('err ' + err))

                                    /*  const steps = Swal.mixin({
                                    confirmButtonText: 'Next &rarr;',
                                    showCancelButton: false,
                                    progressSteps: ['1', '2', '3', '4', '5'],
                                    didOpen: (t) => {
                                        if (Swal.getQueueStep() == 4) {
                                            Swal.getConfirmButton().innerHTML = 'OK!'
                                        }
                                    },
                                }).queue([{
                                    text: 'You are arrived at the shop',
                                    imageUrl: 'https://firebasestorage.googleapis.com/v0/b/it60-42-choen-savoey.appspot.com/o/javascripts%2FBest%20of%20Behance.gif?alt=media&token=286a5562-2633-4ed4-8a0f-62032c60fce6',
                                    imageWidth: 350,
                                    imageHeight: 250,
                                }, {
                                    imageUrl: 'https://firebasestorage.googleapis.com/v0/b/it60-42-choen-savoey.appspot.com/o/javascripts%2FMetamorphosis.gif?alt=media&token=31fc8981-b433-4f45-ba70-a207f9e50cb5',
                                    imageWidth: 350,
                                    imageHeight: 250,
                                    text: 'You are placed the order',
                                }, {
                                    imageUrl: 'https://firebasestorage.googleapis.com/v0/b/it60-42-choen-savoey.appspot.com/o/javascripts%2Fbell.gif?alt=media&token=5735736c-97fc-4f4a-a4f3-f17d343741fb',
                                    imageWidth: 150,
                                    imageHeight: 150,
                                    text: 'You are collected the food'
                                }, {
                                    imageUrl: 'https://firebasestorage.googleapis.com/v0/b/it60-42-choen-savoey.appspot.com/o/javascripts%2Fscooter-running.gif?alt=media&token=0385ea48-a31a-494c-8f8e-b15a7a7f72c1',
                                    imageWidth: 250,
                                    imageHeight: 200,
                                    text: 'Waiting for shipment'
                                }, {
                                    text: 'Order has been delivered',
                                    imageUrl: 'https://firebasestorage.googleapis.com/v0/b/it60-42-choen-savoey.appspot.com/o/javascripts%2FOnline%20Surveys%20for%20Cash%20_%20Earn%20Money%20online.gif?alt=media&token=08866601-ce6d-4946-b270-288a3f8401f0',
    
                                }, ])
    
                                steps.then((result) => {
    
                                    if (result.value) {
                                        // const answers = JSON.stringify(result.value)
                                        Swal.fire({
                                            title: 'Process Sucessful',
                                            imageUrl: 'https://firebasestorage.googleapis.com/v0/b/it60-42-choen-savoey.appspot.com/o/javascripts%2Fcheck-circle.gif?alt=media&token=48c6c548-6816-4bf7-8f23-06c09d58f0e6',
                                            confirmButtonText: 'Thank you!'
                                        })
                                    }
                                })*/
                                })
                            } else {
                                Swal.fire('', 'You are deny this order', 'error')
                            }
                        })

                    }
                </script>


</body>
<style>
    .font {
        font-family: Kanit;
    }
    
    .line {
        position: absolute;
        width: 100%;
        height: 1px;
        top: 2px;
        background: #D8D8D8;
        border: 1px solid rgba(151, 151, 151, 0.25);
    }
    
    .line2 {
        position: absolute;
        width: 100%;
        height: 1px;
        top: 120px;
        background: #D8D8D8;
        border: 1px solid rgba(151, 151, 151, 0.25);
    }
    
    .vector {
        margin-top: 8px;
        margin-left: 30px;
        margin-bottom: 2px;
        font-size: 30px;
    }
    
    .title {
        display: flex;
        font-weight: 800;
        font-size: 28px;
        background: linear-gradient(#1D617A, #61C2A2);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        margin-top: 3px;
        margin-left: 25px;
        margin-bottom: 3px;
    }
    
    .location {
        font-size: medium;
        display: flex;
        width: max-content;
        border: 1px solid gainsboro;
        padding: 7px;
        margin: 5px;
        border-radius: 10px;
        margin-left: 50%;
    }
    
    .order {
        display: flex;
        margin: auto;
        margin-top: 80px;
        margin-bottom: 30px;
        width: 70%;
        height: auto;
        border: 1px;
        background-color: #E5E5E5;
        border-radius: 20px;
    }
    
    .confirm_Order {
        display: flex;
        margin: auto;
        margin-top: auto;
        background-image: linear-gradient(to right, #1D617A, #61C2A2);
        border-radius: 20px;
        width: fit-content;
        box-shadow: 1px 1px 1px grey;
    }
    
    .backbtn {
        background-color: transparent;
        border: none;
        color: black;
        padding: 16px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        margin: 4px 2px;
        transition-duration: 0.4s;
        cursor: pointer;
        size: 10px;
    }
</style>


</html>