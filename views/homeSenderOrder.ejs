<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <!-- Site meta -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title> </title>
    <!-- CSS -->
    <link href="//maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//fonts.googleapis.com/css?family=Open+Sans:400,300,600" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="/stylesheets/senderstyle.css">
    <!--===============================================================================================-->

</head>

<%- include ("layoutSender.ejs") %>

    <body>
        <div class="container">
            <div class="row">
                <% orderList.forEach((orderDetail) => { %>
                    <div class="col-sm-6">
                        <div class="card" id="detail">
                            <div class="card-body">
                                <h5 class="card-title">
                                    <%= orderDetail.menuName %>
                                </h5>
                                <p class="card-text">จำนวน:
                                    <%= orderDetail.qty %> แก้ว | ราคา:
                                        <%= orderDetail.price %> บาท</p>

                                <button type="button" class="btn btn-success" onclick="testSweet()">Confirm Order</button>

                            </div>
                        </div>
                    </div>
                    <% }); %>
            </div>
        </div>




        <!-- Sweetalret2 script -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/7.28.2/sweetalert2.all.min.js"></script>
        <script>
            function testSweet() {
                Swal.fire({
                    title: 'Are you sure?',
                    text: "You won't be able to revert this!",
                    icon: "warning",
                    reverseButtons: true,
                    showCancelButton: true,
                    confirmButtonText: 'Confirm',
                    confirmButtonColor: '#27AE60',
                    cancelButtonColor: '#C0392B',
                }).then((result) => {

                    console.log(result)

                    if (result.value) {
                        Swal.fire(
                            "",
                            'You are confirm this order',
                            'success'
                        ).then(() => {
                            const steps = Swal.mixin({
                                confirmButtonText: 'Next &rarr;',
                                showCancelButton: true,
                                progressSteps: ['1', '2', '3', '4', '5']
                            }).queue([{
                                text: 'Sender has arrived at the shop',
                                imageUrl: 'https://firebasestorage.googleapis.com/v0/b/it60-42-choen-savoey.appspot.com/o/javascripts%2FBest%20of%20Behance.gif?alt=media&token=286a5562-2633-4ed4-8a0f-62032c60fce6',
                                imageWidth: 350,
                                imageHeight: 250,
                            }, {
                                imageUrl: 'https://firebasestorage.googleapis.com/v0/b/it60-42-choen-savoey.appspot.com/o/javascripts%2FMetamorphosis.gif?alt=media&token=31fc8981-b433-4f45-ba70-a207f9e50cb5',
                                imageWidth: 350,
                                imageHeight: 250,
                                text: 'Sender has placed the order',
                            }, {
                                imageUrl: 'https://firebasestorage.googleapis.com/v0/b/it60-42-choen-savoey.appspot.com/o/javascripts%2Fbell.gif?alt=media&token=5735736c-97fc-4f4a-a4f3-f17d343741fb',
                                imageWidth: 150,
                                imageHeight: 150,
                                text: 'Sender has collected the food'
                            }, {
                                imageUrl: 'https://firebasestorage.googleapis.com/v0/b/it60-42-choen-savoey.appspot.com/o/javascripts%2Fscooter-running.gif?alt=media&token=0385ea48-a31a-494c-8f8e-b15a7a7f72c1',
                                imageWidth: 250,
                                imageHeight: 200,
                                text: 'Waiting for shipment'
                            }, {
                                text: 'Order has been delivered',
                                imageUrl: 'https://firebasestorage.googleapis.com/v0/b/it60-42-choen-savoey.appspot.com/o/javascripts%2Fcheck-circle.gif?alt=media&token=48c6c548-6816-4bf7-8f23-06c09d58f0e6',
                            }, ])

                            steps.then((result) => {
                                if (result.value) {
                                    const answers = JSON.stringify(result.value)
                                    Swal.fire({
                                        title: 'All done!',
                                        html: `
                            Your answers:
                            <pre><code>${answers}</code></pre>
                            `,
                                        confirmButtonText: 'Lovely!'
                                    })
                                }
                            })
                        })
                    } else {
                        Swal.fire('', '', 'error')
                    }



                })

            }
        </script>
    </body>

    <style>
        .card {
            top: 50px;
        }
    </style>

</html>